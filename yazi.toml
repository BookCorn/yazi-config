# yazi.toml â€” clean 3-pane, preview biggest
[mgr]
ratio = [1, 3, 5]
sort_by = "natural"
sort_dir_first = true
show_hidden = true
linemode = "mtime"
title_format = "yazi - {cwd}"
mouse_events = ["click", "scroll"]

[preview]
wrap = "yes"
max_width  = 1200
max_height = 900
image_delay = 60
image_filter  = "triangle"
image_quality = 75

[tasks]
image_alloc = 33554432
image_bound = [3840, 2160]
micro_workers = 4
macro_workers = 2

[env]
# Ensure Yazi uses Neovim for any editor-based actions (e.g. batch rename)
VISUAL = "nvim"
EDITOR = "nvim"

[opener]
edit = [
  # Prefer a direct Neovim call on macOS to avoid invalid $EDITOR values
  { run = "nvim \"$@\"", block = true, for = "macos" },
  { run = "$EDITOR \"$@\"", block = true, for = "unix" },
  { run = "code \"$@\"",     orphan = true, for = "unix" }
]
open = [
  { run = "xdg-open %s", desc = "Open", for = "linux" },
  { run = "open %s",     desc = "Open", for = "macos" }
]
play = [
  { run = "mpv %s", orphan = true, for = "unix" }
]

[open]
prepend_rules = [
  { mime = "text/*",  use = "edit" },
  { mime = "image/*", use = ["open"] }
]

[plugin]
append_previewers = [
  { mime = "image/*",          run = "image" },
  { mime = "video/*",          run = "video" },
  { url  = "*.zip",            run = "archive" },
  { url  = "*.tar",            run = "archive" },
  { url  = "*.tar.*",          run = "archive" },
  { url  = "*.7z",             run = "archive" },
  { mime = "application/pdf",  run = "pdf" },
  { url  = "*",                run = "code" }
]

[input]
cursor_blink = true

[confirm]
trash = { }
delete = { }
overwrite = { }
quit = { }
